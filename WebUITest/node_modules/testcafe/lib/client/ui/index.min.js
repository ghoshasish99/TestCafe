!function S(D){var U=D.document;!function(l){"use strict";var h,f,s,p,m,a={".js":[],".json":[],".css":[],".html":[]},u="function"==typeof require?require:null;return p=function(t){var e=new Error("Could not find module '"+t+"'");return e.code="MODULE_NOT_FOUND",e},m=function(t,e,n){var i,s;if("function"==typeof t[e+n])return e+n;for(i=0;s=a[n][i];++i)if("function"==typeof t[e+s])return e+s;return null},h=function(t,e,n,i,s,a){var o,r,l,u,d,c;for("."!==(o=(n=n.split(/[\\/]/)).pop())&&".."!==o||(n.push(o),o="");null!=(r=n.shift());)if(r&&"."!==r&&(".."===r?(t=e.pop(),a=a.slice(0,a.lastIndexOf("/"))):(e.push(t),t=t[r],a+="/"+r),!t))throw p(i);if(o&&"function"!=typeof t[o]&&((c=(c=(c=(c=m(t,o,".js"))||m(t,o,".json"))||m(t,o,".css"))||m(t,o,".html"))?o=c:2!==s&&"object"==typeof t[o]&&(e.push(t),t=t[o],a+="/"+o,o="")),!o)return 1!==s&&t[":mainpath:"]?h(t,e,t[":mainpath:"],i,1,a):h(t,e,"index",i,2,a);if(!(d=t[o]))throw p(i);return d.hasOwnProperty("module")?d.module.exports:(l={},d.module=u={exports:l,id:a+"/"+o},d.call(l,l,u,f(t,e,a)),u.exports)},s=function(t,e,n,i){var s,a=n,o=n.charAt(0),r=0;if("/"===o){if(a=a.slice(1),!(t=l["/"])){if(u)return u(n);throw p(n)}i="/",e=[]}else if("."!==o){if(s=a.split("/",1)[0],!(t=l[s])){if(u)return u(n);throw p(n)}i=s,e=[],(a=a.slice(s.length+1))||(r=(a=t[":mainpath:"])?1:(a="index",2))}return h(t,e,a,n,r,i)},(f=function(e,n,i){return function(t){return s(e,[].concat(n),t,i)}})(l,[],"")}({"testcafe-release":{src:{client:{ui:{cursor:{"iframe-cursor.js":function(t,e,n){t.__esModule=!0;var i=o(n("../deps/hammerhead")),s=n("../deps/testcafe-core"),a=o(n("./messages"));function o(t){return t&&t.__esModule?t:{default:t}}var r=i.default.utils.browser.isIE?1:0;t.default={move:function(t,e){var n={cmd:a.default.moveRequest,x:t+r,y:e+r};return(0,s.sendRequestToFrame)(n,a.default.moveResponse,D.parent)},leftButtonDown:function(){return(0,s.sendRequestToFrame)({cmd:a.default.leftButtonDownRequest},a.default.leftButtonDownResponse,D.parent)},rightButtonDown:function(){return(0,s.sendRequestToFrame)({cmd:a.default.rightButtonDownRequest},a.default.rightButtonDownResponse,D.parent)},buttonUp:function(){return(0,s.sendRequestToFrame)({cmd:a.default.buttonUpRequest},a.default.buttonUpResponse,D.parent)}},e.exports=t.default},"index.js":function(t,e,n){t.__esModule=!0;var i=r(n("./../deps/hammerhead")),s=r(n("./../deps/testcafe-core")),a=r(n("../ui-root")),o=r(n("./messages"));function r(t){return t&&t.__esModule?t:{default:t}}var l=i.default.Promise,u=i.default.shadowUI,d=i.default.utils.browser,c=i.default.utils.featureDetection,h=i.default.eventSandbox.message,f=s.default.styleUtils,p=s.default.positionUtils,m="l-mouse-down",g="r-mouse-down",v=[m,g].join(" ");h.on(h.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message,n=null;switch(e.cmd){case o.default.moveRequest:n=p.getIframePointRelativeToParentFrame({x:e.x,y:e.y},t.source),y.move(n.x,n.y).then(function(){return h.sendServiceMsg({cmd:o.default.moveResponse},t.source)});break;case o.default.leftButtonDownRequest:y.leftButtonDown().then(function(){return h.sendServiceMsg({cmd:o.default.leftButtonDownResponse},t.source)});break;case o.default.rightButtonDownRequest:y.rightButtonDown().then(function(){return h.sendServiceMsg({cmd:o.default.rightButtonDownResponse},t.source)});break;case o.default.buttonUpRequest:y.buttonUp().then(function(){return h.sendServiceMsg({cmd:o.default.buttonUpResponse},t.source)})}});var y={cursorElement:null,x:50,y:50,pointerOffsetX:0,pointerOffsetY:0,_createElement:function(){this.cursorElement=U.createElement("div"),u.addClass(this.cursorElement,"cursor"),c.isTouchDevice&&!d.isIE&&(u.addClass(this.cursorElement,"touch"),this.pointerOffsetX=Math.ceil(f.getWidth(this.cursorElement)/2),this.pointerOffsetY=Math.ceil(f.getHeight(this.cursorElement)/2)),a.default.element().appendChild(this.cursorElement)},isVisible:function(){return this.cursorElement&&"hidden"!==f.get(this.cursorElement,"visibility")},hide:function(){this.cursorElement||this._createElement(),f.set(this.cursorElement,"visibility","hidden")},show:function(){this.cursorElement||this._createElement(),f.set(this.cursorElement,"visibility","")},move:function(t,e){return this.x=t,this.y=e,this.cursorElement||this._createElement(),f.set(this.cursorElement,{left:this.x-this.pointerOffsetX+"px",top:this.y-this.pointerOffsetY+"px"}),l.resolve()},leftButtonDown:function(){return this.cursorElement||this._createElement(),u.removeClass(this.cursorElement,v),u.addClass(this.cursorElement,m),l.resolve()},rightButtonDown:function(){return this.cursorElement||this._createElement(),u.removeClass(this.cursorElement,v),u.addClass(this.cursorElement,g),l.resolve()},buttonUp:function(){return this.cursorElement||this._createElement(),u.removeClass(this.cursorElement,v),l.resolve()}};t.default=y,e.exports=t.default},"messages.js":function(t,e,n){t.__esModule=!0,t.default={moveRequest:"ui|cursor|move|request",leftButtonDownRequest:"ui|cursor|leftbuttondown|request",rightButtonDownRequest:"ui|cursor|rightbuttondown|request",buttonUpRequest:"ui|cursor|buttonup|request",moveResponse:"ui|cursor|move|response",leftButtonDownResponse:"ui|cursor|leftbuttondown|response",rightButtonDownResponse:"ui|cursor|rightbuttondown|response",buttonUpResponse:"ui|cursor|buttonup|response"},e.exports=t.default}},deps:{"hammerhead.js":function(t,e,n){t.__esModule=!0,t.default=D["%hammerhead%"],e.exports=t.default},"testcafe-core.js":function(t,e,n){t.__esModule=!0,t.default=D["%testCafeCore%"],e.exports=t.default}},"index.js":function(t,e,n){var i=m(n("./deps/hammerhead")),s=m(n("./deps/testcafe-core")),a=p(n("./select-element")),o=p(n("./modal-background")),r=m(n("./progress-panel")),l=m(n("./status-bar")),u=m(n("./status-bar/iframe-status-bar")),d=m(n("./cursor")),c=p(n("./cursor/iframe-cursor")),h=m(n("./screenshot-mark")),f=m(n("./ui-root"));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function m(t){return t&&t.__esModule?t:{default:t}}var g=i.default.Promise,v=i.default.eventSandbox.message,y=s.default.sendRequestToFrame,_="ui|hide|request",E="ui|hide|response",w="ui|show|request",C="ui|show|response";v.on(v.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===_?(f.default.hide(),v.sendServiceMsg({cmd:E},t.source)):t.message.cmd===w&&(f.default.show(),v.sendServiceMsg({cmd:C},t.source))}),t.cursorUI=d.default,t.iframeCursorUI=c,t.selectElement=a,t.modalBackground=o,t.ProgressPanel=r.default,t.StatusBar=l.default,t.IframeStatusBar=u.default,t.get=n,t.hide=function(t){return t?y({cmd:_},E,D.top):(f.default.hide(),g.resolve())},t.show=function(t){return t?y({cmd:w},C,D.top):(f.default.show(),g.resolve())},t.showScreenshotMark=function(t){return h.default.show(t)},t.hideScreenshotMark=function(){return h.default.hide()};var b=i.default.nativeMethods,x=i.default.EVENTS.evalIframeScript;b.objectDefineProperty(D,"%testCafeUI%",{configurable:!0,value:t}),i.default.on(x,function(t){return S(b.contentWindowGetter.call(t.iframe))})},"modal-background.js":function(t,e,n){t.__esModule=!0,t.initAndShowLoadingText=function(){function e(){_(),a.styleUtils.set(p,"opacity",h),a.styleUtils.set(p,"display","block"),a.styleUtils.set(m,"display","block"),n=!0}var n=!1;(function t(){n||(U.body?e():s.nativeMethods.setTimeout.call(D,t,0))})(),a.eventUtils.documentReady().then(function(){n||e()})},t.show=function(t){v||_(),a.styleUtils.set(p,"opacity",t?0:c),a.styleUtils.set(p,"display","block")},t.hide=function(){v&&(a.styleUtils.set(m,"display","none"),a.styleUtils.set(p,"display","none"))},t.showLoadingIcon=function(){a.styleUtils.set(g,"visibility","visible")},t.hideLoadingIcon=function(){a.styleUtils.set(g,"visibility","hidden")};var i,s=n("./deps/hammerhead"),a=n("./deps/testcafe-core"),o=n("./ui-root"),r=(i=o)&&i.__esModule?i:{default:i},l="Loading page...",u="modal-background",d="loading-text",c=.7,h=.8,f="loading-icon",p=null,m=null,g=null,v=!1;function y(){function t(){var t=a.styleUtils.getHeight(D),e=a.styleUtils.getWidth(D);a.styleUtils.set(p,"width",e+"px"),a.styleUtils.set(p,"height",t+"px"),a.styleUtils.set(g,{left:Math.round((e-a.styleUtils.getWidth(g))/2)+"px",top:Math.round((t-a.styleUtils.getHeight(g))/2)+"px"})}t(),a.eventUtils.bind(D,"resize",t)}function _(){var t,e,n,i;t=r.default.element(),p=U.createElement("div"),t.appendChild(p),s.shadowUI.addClass(p,u),m=U.createElement("div"),s.nativeMethods.nodeTextContentSetter.call(m,l),t.appendChild(m),s.shadowUI.addClass(m,d),g=U.createElement("div"),a.styleUtils.set(g,"visibility","hidden"),t.appendChild(g),s.shadowUI.addClass(g,f),y(),e=a.styleUtils.getHeight(D),n=a.styleUtils.getWidth(D),(i=!a.styleUtils.hasDimensions(m))&&(a.styleUtils.set(m,"visibility","hidden"),a.styleUtils.set(m,"display","block")),a.styleUtils.set(m,{left:Math.max((n-a.styleUtils.getWidth(m))/2,0)+"px",top:Math.max((e-a.styleUtils.getHeight(m))/2,0)+"px"}),i&&(a.styleUtils.set(m,"display","none"),a.styleUtils.set(m,"visibility","")),v=!0}},"progress-panel":{"index.js":function(t,e,n){t.__esModule=!0;var i=r(n("../deps/hammerhead")),s=r(n("../deps/testcafe-core")),a=r(n("./progress-bar")),o=r(n("../ui-root"));function r(t){return t&&t.__esModule?t:{default:t}}var l=i.default.shadowUI,d=i.default.nativeMethods,u=s.default.eventUtils,c=s.default.styleUtils,h=(f._getInvisibleElementProperty=function(t,e){var n="none"===c.get(t,"display");n&&c.set(t,"display","block");var i=t[e];return n&&c.set(t,"display","none"),i},f._showAtWindowCenter=function(t){var e=f._getInvisibleElementProperty(t,"offsetHeight"),n=f._getInvisibleElementProperty(t,"offsetWidth"),i=Math.round(c.getHeight(D)/2-e/2),s=Math.round(c.getWidth(D)/2-n/2);c.set(t,{left:s+"px",top:i+"px"})},f.prototype._setCurrentProgress=function(){var t=Math.round((Date.now()-this.startTime)/this.maxTimeout*100);this.progressBar.setValue(t)},f.prototype._setSuccess=function(t){this.progressBar.setSuccess(t)},f.prototype._stopAnimation=function(){d.clearInterval.call(D,this.animationInterval)},f.prototype._animate=function(t,e,n,i){var s=this,a=Date.now(),o=n?0:1,r=0,l=0,u=0;n&&(c.set(t,"opacity",o),c.set(t,"display","block")),this._stopAnimation(),this.animationInterval=d.setInterval.call(D,function(){r=Date.now()-a,l=Math.min(r/e,1),u=.5-Math.cos(l*Math.PI)/2,c.set(t,"opacity",o+(n?u:-u)),1===l&&(s._stopAnimation(),i&&i())},10)},f.prototype._showPanel=function(){u.bind(D,"resize",this.disposePanel),this._animate(this.panelDiv,200,!0)},f.prototype._hidePanel=function(t){var e=this;this.startTime=null,u.unbind(D,"resize",this.disposePanel),this._animate(this.panelDiv,t?0:600,!1,function(){return c.set(e.panelDiv,"display","none")})},f.prototype.show=function(t,e){var n=this;this.startTime=Date.now(),this.maxTimeout=e,d.nodeTextContentSetter.call(this.titleDiv,t),this._setSuccess(!1),this.openingTimeout=d.setTimeout.call(D,function(){n.openingTimeout=null,n._setCurrentProgress(),n._showPanel(),n.updateInterval=d.setInterval.call(D,function(){return n._setCurrentProgress()},100)},300)},f.prototype.close=function(t){var e=this;t&&this._setSuccess(!0),this.openingTimeout&&(d.clearTimeout.call(D,this.openingTimeout),this.openingTimeout=null),this.updateInterval&&(d.clearInterval.call(D,this.updateInterval),this.updateInterval=null),t?this.startTime&&Date.now()-this.startTime<1e3?d.setTimeout.call(D,function(){d.setTimeout.call(D,function(){return e._hidePanel(!1)},200)},100):d.setTimeout.call(D,function(){return e._hidePanel(!1)},200):this._hidePanel(!0)},f);function f(){var t=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),this.startTime=null,this.openingTimeout=null,this.updateInterval=null,this.animationInterval=null,this.panelDiv=U.createElement("div"),o.default.element().appendChild(this.panelDiv),this.titleDiv=U.createElement("div"),this.panelDiv.appendChild(this.titleDiv),this.contentDiv=U.createElement("div"),this.panelDiv.appendChild(this.contentDiv),l.addClass(this.panelDiv,"progress-panel"),l.addClass(this.titleDiv,"title"),l.addClass(this.contentDiv,"content"),f._showAtWindowCenter(this.panelDiv),this.progressBar=new a.default(this.contentDiv),this.disposePanel=function(){return f._showAtWindowCenter(t.panelDiv)}}t.default=h,e.exports=t.default},"progress-bar.js":function(t,e,n){t.__esModule=!0;var i=a(n("../deps/hammerhead")),s=a(n("../deps/testcafe-core"));function a(t){return t&&t.__esModule?t:{default:t}}var o=i.default.shadowUI,r=s.default.styleUtils,l="success",u=(d.prototype.setValue=function(t){t="number"!=typeof t?0:Math.min(Math.max(t,0),100),r.set(this.valueElement,"width",t+"%")},d.prototype.setSuccess=function(t){t?o.addClass(this.containerElement,l):o.removeClass(this.containerElement,l)},d);function d(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.containerElement=U.createElement("div"),this.valueElement=U.createElement("div"),t.appendChild(this.containerElement),this.containerElement.appendChild(this.valueElement),o.addClass(this.containerElement,"progress-bar"),o.addClass(this.valueElement,"value")}t.default=u,e.exports=t.default}},"screenshot-mark.js":function(t,e,n){t.__esModule=!0;var i=n("./deps/hammerhead"),s=n("../../screenshots/constants");t.default={screenshotMark:null,_createMark:function(){this.screenshotMark=U.createElement("img"),i.shadowUI.addClass(this.screenshotMark,"screenshot-mark"),this.screenshotMark.style.right=s.MARK_RIGHT_MARGIN/D.devicePixelRatio+"px",this.screenshotMark.style.width=s.MARK_LENGTH/D.devicePixelRatio+"px",this.screenshotMark.style.height=s.MARK_HEIGHT/D.devicePixelRatio+"px",this.hide(),i.shadowUI.getRoot().appendChild(this.screenshotMark)},hide:function(){this.screenshotMark&&(this.screenshotMark.style.visibility="hidden")},show:function(t){this.screenshotMark||this._createMark(),i.nativeMethods.imageSrcSetter.call(this.screenshotMark,t),this.screenshotMark.style.visibility=""}},e.exports=t.default},"select-element.js":function(t,e,n){t.__esModule=!0,t.expandOptionList=function(t){var e=t.children;if(e.length){if(b){var n=t===b;if(R(),n)return}b=t,x=U.createElement("div"),r.default.element().appendChild(x),c.addClass(x,y),M(e,x),l.addInternalEventListener(D,["click"],B),h.setTimeout.call(D,function(){g.bind(U,"mousedown",T)},0),m.set(x,{position:"absolute",fontSize:m.get(b,"fontSize"),fontFamily:m.get(b,"fontFamily"),minWidth:m.getWidth(b)+"px",left:f.getOffsetPosition(b).left+"px",height:p.getSelectVisibleChildren(t).length>C?m.getOptionHeight(t)*C:""});var i=f.getOffsetPosition(b).top,s=m.getHeight(x),a=i+m.getHeight(b)+2;if(a+s>m.getScrollTop(D)+m.getHeight(D)){var o=i-3-s;o>=m.getScrollTop(D)&&(a=o)}m.set(x,"top",a+"px")}},t.collapseOptionList=R,t.isOptionListExpanded=A,t.getEmulatedChildElement=function(t){var e="optgroup"===p.getTagName(t),n=p.getElementIndexInParent(b,t);return e?S[n]:I[n]},t.scrollOptionListByChild=function(t){var e=p.getSelectParent(t);if(e){var n=m.getSelectElementSize(e),i=m.getOptionHeight(e),s=0,a=Math.max(m.getScrollTop(e)/i,0),o=a+n-1,r=p.getChildVisibleIndex(e,t);r<a?(s=i*(a-r),m.setScrollTop(e,Math.max(m.getScrollTop(e)-s,0))):o<r&&(s=i*(r-o),m.setScrollTop(e,m.getScrollTop(e)+s))}},t.getSelectChildCenter=function(t){var e=p.getSelectParent(t);if(!e)return{x:0,y:0};var n=m.getOptionHeight(e),i=f.getElementRectangle(t);return{x:Math.round(i.left+i.width/2),y:Math.round(i.top+n/2)}},t.switchOptionsByKeys=function(t,e){var n=m.getSelectElementSize(t),i=!m.hasDimensions(c.select("."+y)[0]);if(/down|up/.test(e)||!u.isIE&&(n<=1||u.isFirefox)&&(i||u.isFirefox)&&/left|right/.test(e)){for(var s=t.querySelectorAll("option"),a=[],o=0;o<s.length;o++){var r=s[o].parentElement;s[o].disabled||"optgroup"===p.getTagName(r)&&r.disabled||a.push(s[o])}var l=v.indexOf(a,s[t.selectedIndex])+(/down|right/.test(e)?1:-1);0<=l&&l<a.length&&(t.selectedIndex=v.indexOf(s,a[l]),u.isIE||d.input(t),d.change(t))}},t.isOptionElementVisible=function(t){var e=p.getSelectParent(t);if(!e)return!0;var n=A(e),i=m.getSelectElementSize(e);return n||1<i};var i=a(n("./deps/hammerhead")),s=a(n("./deps/testcafe-core")),r=a(n("./ui-root"));function a(t){return t&&t.__esModule?t:{default:t}}var c=i.default.shadowUI,u=i.default.utils.browser,o=i.default.utils.featureDetection,h=i.default.nativeMethods,d=i.default.eventSandbox.eventSimulator,l=i.default.eventSandbox.listeners,f=s.default.positionUtils,p=s.default.domUtils,m=s.default.styleUtils,g=s.default.eventUtils,v=s.default.arrayUtils,y="tcOptionList",_="tcOptionGroup",E="tcOption",w="disabled",C=u.isIE?30:20,b=null,x=null,S=[],I=[];function T(t){(t.target||t.srcElement)===b||p.containsElement(b,t.target)||p.containsElement(x,t.target)||R()}function B(t,e,n){var i=v.indexOf(I,t.target);if(!(i<0)){n();var s=-1<t.target.className.indexOf(w);s&&u.isWebKit||function(t,e){var n=b.selectedIndex,i=b.getElementsByTagName("option")[t],s=!e&&t!==n;s&&!u.isIE&&(b.selectedIndex=t),u.isFirefox||u.isIE||!s||(d.input(b),d.change(b)),(u.isFirefox||u.isIE)&&d.mousedown(u.isFirefox?i:b),o.isTouchDevice||d.mouseup(u.isFirefox?i:b),(u.isFirefox||u.isIE)&&s&&(u.isIE&&(b.selectedIndex=t),u.isIE||d.input(b),d.change(b)),o.isTouchDevice||d.click(u.isFirefox||u.isIE?i:b),e||R()}(i,s)}}function M(t,e){for(var n,i,s,a,o,r,l,u=p.getChildrenLength(t),d=0;d<u;d++)p.isOptionElement(t[d])?(a=t[d],o=e,r=U.createElement("div"),l=a.disabled||"optgroup"===p.getTagName(a.parentElement)&&a.parentElement.disabled,h.nodeTextContentSetter.call(r,a.text),o.appendChild(r),c.addClass(r,E),l&&(c.addClass(r,w),m.set(r,"color",m.get(a,"color"))),I.push(r)):"optgroup"===p.getTagName(t[d])&&(n=t[d],i=e,s=U.createElement("div"),h.nodeTextContentSetter.call(s,n.label||" "),i.appendChild(s),c.addClass(s,_),s.disabled&&(c.addClass(s,w),m.set(s,"color",m.get(n,"color"))),M(n.children,s),S.push(s))}function R(){p.remove(x),g.unbind(U,"mousedown",T),b=x=null,I=[],S=[]}function A(t){return t?t===b:!!b}},"status-bar":{"iframe-status-bar.js":function(t,e,n){t.__esModule=!0;var i=r(n("./../deps/hammerhead")),s=r(n("./../deps/testcafe-core")),a=r(n("./messages")),o=r(n("./index"));function r(t){return t&&t.__esModule?t:{default:t}}var l,u=s.default.sendRequestToFrame,d=i.default.eventSandbox.message,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,l=o.default),h.prototype.showWaitingElementStatus=function(t){d.sendServiceMsg({cmd:a.default.startWaitingElement,timeout:t},D.top)},h.prototype.hideWaitingElementStatus=function(t){var e={cmd:a.default.endWaitingElementRequest,waitingSuccess:t};return u(e,a.default.endWaitingElementResponse,D.top)},h.prototype.showWaitingAssertionRetriesStatus=function(t){d.sendServiceMsg({cmd:a.default.startWaitingAssertionRetries,timeout:t},D.top)},h.prototype.hideWaitingAssertionRetriesStatus=function(t){var e={cmd:a.default.endWaitingAssertionRetriesRequest,waitingSuccess:t};return u(e,a.default.endWaitingAssertionRetriesResponse,D.top)},h);function h(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,l.call(this))}t.default=c,e.exports=t.default},"index.js":function(t,e,n){t.__esModule=!0;var i=l(n("./../deps/hammerhead")),s=l(n("./../deps/testcafe-core")),a=l(n("./progress-bar")),o=l(n("../ui-root")),r=l(n("./messages"));function l(t){return t&&t.__esModule?t:{default:t}}var u,d=i.default.Promise,c=i.default.shadowUI,h=i.default.nativeMethods,f=i.default.eventSandbox.message,p=i.default.utils.browser,m=i.default.utils.featureDetection,g=i.default.eventSandbox.listeners,v=s.default.styleUtils,y=s.default.eventUtils,_=s.default.domUtils,E=s.default.serviceUtils,w=s.default.arrayUtils,C="waiting-element-failed",b="waiting-element-success",x="%testCafeStatusPrefix%",S=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(I,u=E.EventEmitter),I.prototype._createButton=function(t,e){var n=U.createElement("div"),i=U.createElement("div"),s=U.createElement("span");return h.nodeTextContentSetter.call(s,t),c.addClass(n,"button"),c.addClass(n,e),c.addClass(i,"button-icon"),p.isSafari&&(s.style.position="relative",s.style.top="1px"),n.appendChild(i),n.appendChild(s),n},I.prototype._createIconArea=function(){this.icon=U.createElement("div"),c.addClass(this.icon,"icon"),this.statusBar.appendChild(this.icon)},I.prototype._createInformationArea=function(){this.infoContainer=U.createElement("div"),c.addClass(this.infoContainer,"info-container"),this.statusBar.appendChild(this.infoContainer);var t=U.createElement("div");c.addClass(t,"info-text-container"),this.infoContainer.appendChild(t);var e=U.createElement("div");c.addClass(e,"status-container"),t.appendChild(e),this.statusDiv=U.createElement("div"),this.statusDiv=U.createElement("div"),h.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText("Loading Web Page...")),c.addClass(this.statusDiv,"status"),c.addClass(this.statusDiv,"info"),e.appendChild(this.statusDiv);var n=U.createElement("div");h.nodeTextContentSetter.call(n,this.fixtureName+" - "+this.testName),c.addClass(n,"fixture"),c.addClass(n,"info"),e.appendChild(n);var i=U.createElement("div");h.nodeTextContentSetter.call(i,this.userAgent),c.addClass(i,"user-agent"),t.appendChild(i)},I.prototype._createActionsArea=function(){var t=this;this.actionsContainer=U.createElement("div"),c.addClass(this.actionsContainer,"actions-container"),this.statusBar.appendChild(this.actionsContainer),this.buttons=U.createElement("div"),c.addClass(this.buttons,"buttons"),this.actionsContainer.appendChild(this.buttons),this.unlockButton=this._createButton("Unlock Page","locked"),this.resumeButton=this._createButton("Resume","resume"),this.nextButton=this._createButton("Next Action","step"),this.finishButton=this._createButton("Finish","finish"),this.buttons.appendChild(this.unlockButton),this.buttons.appendChild(this.resumeButton),this.buttons.appendChild(this.nextButton),this.actionsContainer.style.display="none",this._bindClickOnce([this.unlockButton],function(){c.removeClass(t.unlockButton,"locked"),c.addClass(t.unlockButton,"unlocked"),h.nodeTextContentSetter.call(t.unlockButton.querySelector("span"),"Page unlocked"),t.state.locked=!1,t.emit(t.UNLOCK_PAGE_BTN_CLICK,{})}),this.unlockButton.style.display="none"},I.prototype._create=function(){this.statusBar=U.createElement("div"),c.addClass(this.statusBar,"status-bar"),this._createIconArea(),this._createInformationArea(),this._createActionsArea(),this.progressBar=new a.default(this.infoContainer),this.progressBar.indeterminateIndicator.start(),this.progressBar.show(),o.default.element().appendChild(this.statusBar),this._bindHandlers(),this.state.created=!0},I.prototype._createBeforeReady=function(){var t=this;this.state.created||D!==D.top||(U.body?this._create():h.setTimeout.call(D,function(){return t._createBeforeReady()},0))},I.prototype._animate=function(t){var e=this,n=Date.now(),i=parseInt(v.get(this.statusBar,"opacity"),10)||0,s=0,a=0,o=0;this._stopAnimation(),t&&(v.set(this.statusBar,"visibility",""),this.state.hidden=!1),this.animationInterval=h.setInterval.call(D,function(){s=Date.now()-n,a=Math.min(s/500,1),o=.5-Math.cos(a*Math.PI)/2,v.set(e.statusBar,"opacity",i+(t?o:-o)),1===a&&(e._stopAnimation(),t||(v.set(e.statusBar,"visibility","hidden"),e.state.hidden=!0),e.state.showing=!1,e.state.hiding=!1)},10)},I.prototype._stopAnimation=function(){this.animationInterval&&(h.clearInterval.call(D,this.animationInterval),this.animationInterval=null)},I.prototype._fadeOut=function(){this.state.hiding||this.state.debugging||(this.state.showing=!1,this.state.hiding=!0,this._animate())},I.prototype._fadeIn=function(){this.state.showing||this.state.debugging||(this.state.hiding=!1,this.state.showing=!0,this._animate(!0))},I.prototype._bindHandlers=function(){var e=this;g.initElementListening(D,["resize"]),g.addInternalEventListener(D,["resize"],function(){e.windowHeight=D.innerHeight});var n=v.getHeight(this.statusBar);g.addFirstInternalHandler(D,["mousemove","mouseout","touchmove"],function(t){"mouseout"!==t.type||t.relatedTarget?"mousemove"!==t.type&&"touchmove"!==t.type||(t.clientY>e.windowHeight-n?e._fadeOut(t):e.state.hidden&&e._fadeIn(t)):e._fadeIn(t)})},I.prototype._bindClickOnce=function(n,i){var s=this,a=m.isTouchDevice?"touchstart":"mousedown";g.addInternalEventListener(D,[a],function t(e){w.find(n,function(t){return _.containsElement(t,e.target)})?(y.preventDefault(e),g.removeInternalEventListener(D,[a],t),i(e)):_.containsElement(s.statusBar,e.target)&&y.preventDefault(e)})},I.prototype._initChildListening=function(){var n=this;f.on(f.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;e.cmd===r.default.startWaitingElement?n.showWaitingElementStatus(e.timeout):e.cmd===r.default.endWaitingElementRequest?n.hideWaitingElementStatus(e.waitingSuccess).then(function(){return f.sendServiceMsg({cmd:r.default.endWaitingElementResponse},t.source)}):e.cmd===r.default.startWaitingAssertionRetries?n.showWaitingAssertionRetriesStatus(e.timeout):e.cmd===r.default.endWaitingAssertionRetriesRequest&&n.hideWaitingAssertionRetriesStatus(e.waitingSuccess).then(function(){return f.sendServiceMsg({cmd:r.default.endWaitingAssertionRetriesResponse},t.source)})})},I.prototype._resetState=function(){this.state.debugging=!1,this.actionsContainer.style.display="none",this.unlockButton.style.display="none",h.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText("")),this.progressBar.hide()},I.prototype._getFullStatusText=function(t){var e=this.contextStorage.getItem(x);return(e?e+". ":"")+t},I.prototype._showWaitingStatus=function(){var t=this.state.assertionRetries?"Waiting for assertion execution...":"Waiting for element to appear...";h.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText(t)),this.progressBar.show()},I.prototype._hideWaitingStatus=function(e){var n=this;return new d(function(t){h.setTimeout.call(D,function(){n.state.waiting||n.state.debugging||(c.removeClass(n.statusBar,b),c.removeClass(n.statusBar,C),n.progressBar.determinateIndicator.reset(),n._resetState()),t()},e?0:500)})},I.prototype._showDebuggingStatus=function(t){var i=this;return new d(function(n){i.state.debugging=!0,i.state.locked=!0,t?(i.buttons.removeChild(i.nextButton),i.buttons.removeChild(i.resumeButton),i.buttons.appendChild(i.finishButton),h.nodeTextContentSetter.call(i.statusDiv,i._getFullStatusText("Test failed")),c.removeClass(i.statusBar,b),c.addClass(i.statusBar,C)):h.nodeTextContentSetter.call(i.statusDiv,i._getFullStatusText("Debugging test...")),i.actionsContainer.style.display="",i.unlockButton.style.display="",i._bindClickOnce([i.resumeButton,i.nextButton,i.finishButton],function(t){var e=_.containsElement(i.nextButton,t.target);i._resetState(),n(e)})})},I.prototype._setWaitingStatus=function(t,e){var n=this;this.state.waiting=!0,this.progressBar.determinateIndicator.start(t,e),this.showingTimeout=h.setTimeout.call(D,function(){n.showingTimeout=null,n._showWaitingStatus()},300)},I.prototype._resetWaitingStatus=function(t){this.state.waiting=!1,this.progressBar.determinateIndicator.stop(),t?c.addClass(this.statusBar,b):c.addClass(this.statusBar,C);var e=this.showingTimeout&&t;return this.showingTimeout&&(h.clearTimeout.call(D,this.showingTimeout),this.showingTimeout=null,t||this._showWaitingStatus()),this._hideWaitingStatus(e)},I.prototype.hidePageLoadingStatus=function(){this.state.created||this._create(),this.progressBar.indeterminateIndicator.stop(),this._resetState()},I.prototype.showDebuggingStatus=function(t){return this._stopAnimation(),v.set(this.statusBar,"opacity",1),v.set(this.statusBar,"visibility",""),this.state.hiden=!1,this._showDebuggingStatus(t)},I.prototype.showWaitingElementStatus=function(t){this.state.assertionRetries||this._setWaitingStatus(t)},I.prototype.hideWaitingElementStatus=function(t){return this.state.assertionRetries?d.resolve():this._resetWaitingStatus(t)},I.prototype.showWaitingAssertionRetriesStatus=function(t,e){this.state.assertionRetries=!0,this._setWaitingStatus(t,e)},I.prototype.hideWaitingAssertionRetriesStatus=function(t){var e=this;return this._resetWaitingStatus(t).then(function(){e.state.assertionRetries=!1})},I.prototype.setStatusPrefix=function(t){this.contextStorage.setItem(x,t),this._resetState()},I);function I(t,e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,I);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.call(this));return s.UNLOCK_PAGE_BTN_CLICK="testcafe|ui|status-bar|unlock-page-btn-click",s.userAgent=t,s.fixtureName=e,s.testName=n,s.contextStorage=i,s.statusBar=null,s.infoContainer=null,s.actionsContainer=null,s.icon=null,s.resumeButton=null,s.finishButton=null,s.nextButton=null,s.statusDiv=null,s.buttons=null,s.progressBar=null,s.animationInterval=null,s.showingTimeout=null,s.windowHeight=U.documentElement?v.getHeight(D):D.innerHeight,s.state={created:!1,showing:!1,hiding:!1,debugging:!1,waiting:!1,assertionRetries:!1,hidden:!1},s.currentView=null,s._createBeforeReady(),s._initChildListening(),s}t.default=S,e.exports=t.default},"messages.js":function(t,e,n){t.__esModule=!0,t.default={startWaitingElement:"start-waiting-element",endWaitingElementRequest:"end-waiting-element-request",endWaitingElementResponse:"end-waiting-element-response",startWaitingAssertionRetries:"start-waiting-assertion-retries",endWaitingAssertionRetriesRequest:"end-waiting-assertion-retries-request",endWaitingAssertionRetriesResponse:"end-waiting-assertion-retries-response"},e.exports=t.default},"progress-bar":{"determinate-indicator.js":function(t,e,n){t.__esModule=!0;var i=a(n("../../deps/hammerhead")),s=a(n("../../deps/testcafe-core"));function a(t){return t&&t.__esModule?t:{default:t}}var o=i.default.shadowUI,r=i.default.nativeMethods,l=s.default.styleUtils,u="determinate",d=(c.prototype._setCurrentProgress=function(){var t=(Date.now()-this.startTime)/this.maxTimeout,e=Math.min(Math.max(t,0),1),n=l.getWidth(this.progressBar),i=Math.round(n*e);l.set(this.firstValueElement,"width",i+"px")},c.prototype.start=function(t,e){var n=this;o.addClass(this.progressBar,u),this.maxTimeout=t,this.startTime=e||Date.now(),this._setCurrentProgress(),this.animationInterval=r.setInterval.call(D,function(){return n._setCurrentProgress()},10)},c.prototype.stop=function(){this.animationInterval&&(r.clearInterval.call(D,this.animationInterval),this.animationInterval=null)},c.prototype.reset=function(){l.set(this.firstValueElement,"width",0),o.removeClass(this.progressBar,u)},c);function c(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.progressBar=t,this.firstValueElement=e,this.maxTimeout=null,this.startTime=null,this.animationInterval=null}t.default=d,e.exports=t.default},"indeterminate-indicator.js":function(t,e,n){t.__esModule=!0;var i=a(n("../../deps/hammerhead")),s=a(n("../../deps/testcafe-core"));function a(t){return t&&t.__esModule?t:{default:t}}var o=i.default.shadowUI,r=i.default.nativeMethods,x=s.default.styleUtils,S=s.default.positionUtils,l={time:2800,points:[.815,.395],positionByCompletePercent:{0:{left:-35,right:100},.6:{left:100,right:-90},1:{left:100,right:-90}}},u={time:3e3,points:[.84,1],positionByCompletePercent:{0:{left:-200,right:100},.6:{left:107,right:-8},1:{left:107,right:-8}}},I=0,T=.6,B=1,d="indeterminate",c=(h._updateValueAnimation=function(t,e,n){var i,s,a,o,r,l,u,d,c,h,f,p,m,g=n.time,v=n.points,y=n.positionByCompletePercent,_=Date.now()-t,E=(i=_/g,s=v[0],a=v[1],3*Math.pow(1-i,2)*i*s+3*(1-i)*i*i*a+i*i*i),w=(d=(l=(o=E)<T)?T:B,c=(r=y)[u=l?I:T],h=r[d],f={x:u,y:c.left},p={x:d,y:h.left},m=S.getLineYByXCoord(f,p,o),f={x:u,y:c.right},p={x:d,y:h.right},{left:m,right:S.getLineYByXCoord(f,p,o)}),C=w.left,b=w.right;x.set(e,"left",Math.round(C)+"%"),x.set(e,"right",Math.round(b)+"%")},h.prototype._clearFirstValueAnimation=function(){this.animationInterval&&(r.clearInterval.call(D,this.animationInterval),this.animationInterval=null),x.set(this.firstValue,"left","-35%"),x.set(this.firstValue,"right","100%")},h.prototype._clearSecondValueAnimation=function(){this.secondValueAnimationInterval&&(r.clearInterval.call(D,this.secondValueAnimationInterval),this.secondValueAnimationInterval=null),x.set(this.secondValue,"left","-200%"),x.set(this.secondValue,"right","100%")},h.prototype._startFirstValueAnimation=function(){var t=this;this._clearFirstValueAnimation();var e=Date.now();this.animationInterval=r.setInterval.call(D,function(){h._updateValueAnimation(e,t.firstValue,l)},10)},h.prototype._startSecondValueAnimation=function(){var t=this;this._clearSecondValueAnimation();var e=Date.now();this.secondValueAnimationInterval=r.setInterval.call(D,function(){h._updateValueAnimation(e,t.secondValue,u)},10)},h.prototype._startAnimation=function(){var t=this;this._startFirstValueAnimation(),this.secondValueAnimationTimeout=r.setTimeout.call(D,function(){return t._startSecondValueAnimation()},1e3),this.restartAnimationTimeout=r.setTimeout.call(D,function(){return t._startAnimation()},1950)},h.prototype._stopAnimation=function(){this._clearFirstValueAnimation(),this._clearSecondValueAnimation(),this.secondValueAnimationTimeout&&(r.clearInterval.call(D,this.secondValueAnimationTimeout),this.secondValueAnimationTimeout=null),this.restartAnimationTimeout&&(r.clearInterval.call(D,this.restartAnimationTimeout),this.restartAnimationTimeout=null)},h.prototype.start=function(){o.addClass(this.progressBar,d),this._startAnimation()},h.prototype.stop=function(){o.removeClass(this.progressBar,d),this._stopAnimation()},h);function h(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),this.progressBar=t,this.firstValue=e,this.secondValue=n,this.animationInterval=null,this.secondValueAnimationInterval=null,this.secondValueAnimationTimeout=null,this.restartAnimationTimeout=null}t.default=c,e.exports=t.default},"index.js":function(t,e,n){t.__esModule=!0;var i=r(n("../../deps/hammerhead")),s=r(n("../../deps/testcafe-core")),a=r(n("./determinate-indicator")),o=r(n("./indeterminate-indicator"));function r(t){return t&&t.__esModule?t:{default:t}}var l=i.default.shadowUI,u=s.default.styleUtils,d=(c.prototype._create=function(t){this.progressBar=U.createElement("div"),l.addClass(this.progressBar,"progress-bar"),t.appendChild(this.progressBar);var e=U.createElement("div");l.addClass(e,"value-container"),this.progressBar.appendChild(e),this.firstValueElement=U.createElement("div"),l.addClass(this.firstValueElement,"value"),e.appendChild(this.firstValueElement),this.secondValueElement=U.createElement("div"),l.addClass(this.secondValueElement,"value"),e.appendChild(this.secondValueElement)},c.prototype.show=function(){u.set(this.progressBar,"visibility","visible")},c.prototype.hide=function(){u.set(this.progressBar,"visibility","hidden")},c);function c(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.progressBar=null,this.firstValueElement=null,this.secondValueElement=null,this._create(t),this.determinateIndicator=new a.default(this.progressBar,this.firstValueElement),this.indeterminateIndicator=new o.default(this.progressBar,this.firstValueElement,this.secondValueElement)}t.default=d,e.exports=t.default}}},"ui-root.js":function(t,e,n){t.__esModule=!0;var i=n("./deps/hammerhead");t.default={uiRoot:null,element:function(){return this.uiRoot||(this.uiRoot=U.createElement("div"),i.shadowUI.getRoot().appendChild(this.uiRoot)),this.uiRoot},hide:function(){this.uiRoot&&(this.uiRoot.style.visibility="hidden")},show:function(){this.uiRoot&&(this.uiRoot.style.visibility="")},remove:function(){var t=i.shadowUI.getRoot();i.nativeMethods.nodeParentNodeGetter.call(t).removeChild(t)}},e.exports=t.default}}},screenshots:{"constants.js":function(t,e,n){t.__esModule=!0,t.MARK_BYTES_PER_PIXEL=4,t.MARK_LENGTH=32,t.MARK_HEIGHT=10,t.MARK_RIGHT_MARGIN=10}}}}})("testcafe-release/src/client/ui/index")}(window);