"use strict";
var __importStar = (this && this.__importStar) || function (mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result["default"] = mod;
    return result;
};
Object.defineProperty(exports, "__esModule", { value: true });
const CODES = __importStar(require("./codes"));
exports.CODES = CODES;
const TEMPLATES = __importStar(require("../templates"));
function getErrorCode(errorClass) {
    const code = Object
        .keys(CODES)
        .find(currentCode => exports.CLASSES[currentCode] === errorClass); // eslint-disable-line no-use-before-define
    return code || CODES.E000;
}
function getErrorInfo(errorClass) {
    const code = getErrorCode(errorClass);
    return {
        constructor: exports.CLASSES[code],
        message: exports.MESSAGES[code],
        code
    };
}
class BasicError extends Error {
    constructor(data = {}) {
        const { code, constructor, message } = getErrorInfo(new.target);
        super(message(data));
        this.name = constructor.name;
        this.data = data;
        this.code = code;
    }
}
class BrowserPathNotSetError extends BasicError {
}
exports.BrowserPathNotSetError = BrowserPathNotSetError;
class UnableToRunBrowsersError extends BasicError {
    constructor({ path }) {
        super({ path });
    }
}
exports.UnableToRunBrowsersError = UnableToRunBrowsersError;
class NativeBinaryHasFailedError extends BasicError {
    constructor({ binary, exitCode, output }) {
        super({ binary, exitCode, output });
    }
}
exports.NativeBinaryHasFailedError = NativeBinaryHasFailedError;
class PermissionError extends NativeBinaryHasFailedError {
}
class UnableToAccessAutomationAPIError extends PermissionError {
}
exports.UnableToAccessAutomationAPIError = UnableToAccessAutomationAPIError;
class UnableToAccessScreenRecordingAPIError extends PermissionError {
}
exports.UnableToAccessScreenRecordingAPIError = UnableToAccessScreenRecordingAPIError;
exports.MESSAGES = {
    [CODES.E000]: TEMPLATES.BASIC_ERROR_MESSAGE,
    [CODES.E001]: TEMPLATES.BROWSER_PATH_NOT_SET,
    [CODES.E002]: TEMPLATES.UNABLE_TO_RUN_BROWSERS,
    [CODES.E003]: TEMPLATES.NATIVE_BINARY_HAS_FAILED,
    [CODES.E004]: TEMPLATES.UNABLE_TO_ACCESS_AUTOMATION_API,
    [CODES.E005]: TEMPLATES.UNABLE_TO_ACCESS_SCREEN_RECORDING_API
};
exports.CLASSES = {
    [CODES.E000]: BasicError,
    [CODES.E001]: BrowserPathNotSetError,
    [CODES.E002]: UnableToRunBrowsersError,
    [CODES.E003]: NativeBinaryHasFailedError,
    [CODES.E004]: UnableToAccessAutomationAPIError,
    [CODES.E005]: UnableToAccessScreenRecordingAPIError
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvZXJyb3JzL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLCtDQUFpQztBQWtGeEIsc0JBQUs7QUFqRmQsd0RBQTBDO0FBRzFDLFNBQVMsWUFBWSxDQUFFLFVBQVU7SUFDN0IsTUFBTSxJQUFJLEdBQUcsTUFBTTtTQUNkLElBQUksQ0FBQyxLQUFLLENBQUM7U0FDWCxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxlQUFPLENBQUMsV0FBVyxDQUFDLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQywyQ0FBMkM7SUFFMUcsT0FBTyxJQUFJLElBQUksS0FBSyxDQUFDLElBQUksQ0FBQztBQUM5QixDQUFDO0FBRUQsU0FBUyxZQUFZLENBQUUsVUFBVTtJQUM3QixNQUFNLElBQUksR0FBRyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUM7SUFFdEMsT0FBTztRQUNILFdBQVcsRUFBRSxlQUFPLENBQUMsSUFBSSxDQUFDO1FBQzFCLE9BQU8sRUFBTSxnQkFBUSxDQUFDLElBQUksQ0FBQztRQUUzQixJQUFJO0tBQ1AsQ0FBQztBQUNOLENBQUM7QUFFRCxNQUFNLFVBQVcsU0FBUSxLQUFLO0lBQzFCLFlBQWEsSUFBSSxHQUFHLEVBQUU7UUFDbEIsTUFBTSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLEdBQUksWUFBWSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUVqRSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFckIsSUFBSSxDQUFDLElBQUksR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDO1FBQzdCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ3JCLENBQUM7Q0FDSjtBQUVELE1BQWEsc0JBQXVCLFNBQVEsVUFBVTtDQUVyRDtBQUZELHdEQUVDO0FBRUQsTUFBYSx3QkFBeUIsU0FBUSxVQUFVO0lBQ3BELFlBQWEsRUFBRSxJQUFJLEVBQUU7UUFDakIsS0FBSyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztJQUNwQixDQUFDO0NBQ0o7QUFKRCw0REFJQztBQUVELE1BQWEsMEJBQTJCLFNBQVEsVUFBVTtJQUN0RCxZQUFhLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUU7UUFDckMsS0FBSyxDQUFDLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO0lBQ3hDLENBQUM7Q0FDSjtBQUpELGdFQUlDO0FBRUQsTUFBTSxlQUFnQixTQUFRLDBCQUEwQjtDQUV2RDtBQUVELE1BQWEsZ0NBQWlDLFNBQVEsZUFBZTtDQUVwRTtBQUZELDRFQUVDO0FBRUQsTUFBYSxxQ0FBc0MsU0FBUSxlQUFlO0NBRXpFO0FBRkQsc0ZBRUM7QUFFWSxRQUFBLFFBQVEsR0FBRztJQUNwQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxTQUFTLENBQUMsbUJBQW1CO0lBQzNDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLFNBQVMsQ0FBQyxvQkFBb0I7SUFDNUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsU0FBUyxDQUFDLHNCQUFzQjtJQUM5QyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxTQUFTLENBQUMsd0JBQXdCO0lBQ2hELENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLFNBQVMsQ0FBQywrQkFBK0I7SUFDdkQsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsU0FBUyxDQUFDLHFDQUFxQztDQUNoRSxDQUFDO0FBRVcsUUFBQSxPQUFPLEdBQUc7SUFDbkIsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsVUFBVTtJQUN4QixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxzQkFBc0I7SUFDcEMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsd0JBQXdCO0lBQ3RDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLDBCQUEwQjtJQUN4QyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxnQ0FBZ0M7SUFDOUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUscUNBQXFDO0NBQ3RELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDT0RFUyBmcm9tICcuL2NvZGVzJztcbmltcG9ydCAqIGFzIFRFTVBMQVRFUyBmcm9tICcuLi90ZW1wbGF0ZXMnO1xuXG5cbmZ1bmN0aW9uIGdldEVycm9yQ29kZSAoZXJyb3JDbGFzcykge1xuICAgIGNvbnN0IGNvZGUgPSBPYmplY3RcbiAgICAgICAgLmtleXMoQ09ERVMpXG4gICAgICAgIC5maW5kKGN1cnJlbnRDb2RlID0+IENMQVNTRVNbY3VycmVudENvZGVdID09PSBlcnJvckNsYXNzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuXG4gICAgcmV0dXJuIGNvZGUgfHwgQ09ERVMuRTAwMDtcbn1cblxuZnVuY3Rpb24gZ2V0RXJyb3JJbmZvIChlcnJvckNsYXNzKSB7XG4gICAgY29uc3QgY29kZSA9IGdldEVycm9yQ29kZShlcnJvckNsYXNzKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnN0cnVjdG9yOiBDTEFTU0VTW2NvZGVdLCAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICBtZXNzYWdlOiAgICAgTUVTU0FHRVNbY29kZV0sIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdXNlLWJlZm9yZS1kZWZpbmVcblxuICAgICAgICBjb2RlXG4gICAgfTtcbn1cblxuY2xhc3MgQmFzaWNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9KSB7XG4gICAgICAgIGNvbnN0IHsgY29kZSwgY29uc3RydWN0b3IsIG1lc3NhZ2UgfSAgPSBnZXRFcnJvckluZm8obmV3LnRhcmdldCk7XG5cbiAgICAgICAgc3VwZXIobWVzc2FnZShkYXRhKSk7XG5cbiAgICAgICAgdGhpcy5uYW1lID0gY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCcm93c2VyUGF0aE5vdFNldEVycm9yIGV4dGVuZHMgQmFzaWNFcnJvciB7XG5cbn1cblxuZXhwb3J0IGNsYXNzIFVuYWJsZVRvUnVuQnJvd3NlcnNFcnJvciBleHRlbmRzIEJhc2ljRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yICh7IHBhdGggfSkge1xuICAgICAgICBzdXBlcih7IHBhdGggfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTmF0aXZlQmluYXJ5SGFzRmFpbGVkRXJyb3IgZXh0ZW5kcyBCYXNpY0Vycm9yIHtcbiAgICBjb25zdHJ1Y3RvciAoeyBiaW5hcnksIGV4aXRDb2RlLCBvdXRwdXQgfSkge1xuICAgICAgICBzdXBlcih7IGJpbmFyeSwgZXhpdENvZGUsIG91dHB1dCB9KTtcbiAgICB9XG59XG5cbmNsYXNzIFBlcm1pc3Npb25FcnJvciBleHRlbmRzIE5hdGl2ZUJpbmFyeUhhc0ZhaWxlZEVycm9yIHtcblxufVxuXG5leHBvcnQgY2xhc3MgVW5hYmxlVG9BY2Nlc3NBdXRvbWF0aW9uQVBJRXJyb3IgZXh0ZW5kcyBQZXJtaXNzaW9uRXJyb3Ige1xuXG59XG5cbmV4cG9ydCBjbGFzcyBVbmFibGVUb0FjY2Vzc1NjcmVlblJlY29yZGluZ0FQSUVycm9yIGV4dGVuZHMgUGVybWlzc2lvbkVycm9yIHtcblxufVxuXG5leHBvcnQgY29uc3QgTUVTU0FHRVMgPSB7XG4gICAgW0NPREVTLkUwMDBdOiBURU1QTEFURVMuQkFTSUNfRVJST1JfTUVTU0FHRSxcbiAgICBbQ09ERVMuRTAwMV06IFRFTVBMQVRFUy5CUk9XU0VSX1BBVEhfTk9UX1NFVCxcbiAgICBbQ09ERVMuRTAwMl06IFRFTVBMQVRFUy5VTkFCTEVfVE9fUlVOX0JST1dTRVJTLFxuICAgIFtDT0RFUy5FMDAzXTogVEVNUExBVEVTLk5BVElWRV9CSU5BUllfSEFTX0ZBSUxFRCxcbiAgICBbQ09ERVMuRTAwNF06IFRFTVBMQVRFUy5VTkFCTEVfVE9fQUNDRVNTX0FVVE9NQVRJT05fQVBJLFxuICAgIFtDT0RFUy5FMDA1XTogVEVNUExBVEVTLlVOQUJMRV9UT19BQ0NFU1NfU0NSRUVOX1JFQ09SRElOR19BUElcbn07XG5cbmV4cG9ydCBjb25zdCBDTEFTU0VTID0ge1xuICAgIFtDT0RFUy5FMDAwXTogQmFzaWNFcnJvcixcbiAgICBbQ09ERVMuRTAwMV06IEJyb3dzZXJQYXRoTm90U2V0RXJyb3IsXG4gICAgW0NPREVTLkUwMDJdOiBVbmFibGVUb1J1bkJyb3dzZXJzRXJyb3IsXG4gICAgW0NPREVTLkUwMDNdOiBOYXRpdmVCaW5hcnlIYXNGYWlsZWRFcnJvcixcbiAgICBbQ09ERVMuRTAwNF06IFVuYWJsZVRvQWNjZXNzQXV0b21hdGlvbkFQSUVycm9yLFxuICAgIFtDT0RFUy5FMDA1XTogVW5hYmxlVG9BY2Nlc3NTY3JlZW5SZWNvcmRpbmdBUElFcnJvclxufTtcblxuXG5leHBvcnQgeyBDT0RFUyB9O1xuIl19